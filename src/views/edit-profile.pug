extends base.pug

block content
  section.row.profile-container
    if errorMessage
      span=errorMessage


    form(method="POST", enctype="multipart/form-data").profile-form
      legend #{loggedInUser.name} edit profile
      fieldset 
        div.profile-avatar
          if loggedInUser.avatarUrl
            p.user-avatar
              img(src=`${loggedInUser.socialOnly ? "":"/"}` + loggedInUser.avatarUrl, crossorigin)
            p.avatar-edit
              label(for="avatar").material-icons settings
              input(type="file" id="avatar", name="avatar", accept=".png, .jpg, jepg")
          else 
            span no image
        

        input(name="name", type="text", required, placeholder="name" value=loggedInUser.name)
        input(name="email", type="email", required, placeholder="email" value=loggedInUser.email)
        input(name="username", type="text", required, placeholder="username" value=loggedInUser.username)
        input(name="location", type="text", required, placeholder="location" value=loggedInUser.location)
        input(type="submit" value="Edit")

        if !loggedInUser.socialOnly
          div.edit-profile__password
            a(href="change-password") Change Password &rarr;